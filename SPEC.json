{
  "spec_version": "1.1.0",
  "name": "epistemic_governor",
  "description": "Epistemic governance system for LLM output validation",
  
  "schema_versions": {
    "ledger": "1.0.0",
    "router": "1.0.0",
    "extractor": "1.1.0",
    "diff": "1.0.0",
    "telemetry": "1.0.0"
  },
  
  "claim_modes": {
    "FACTUAL": {
      "description": "Assertions about world state",
      "creates_timeline_obligations": true,
      "requires_framing": false
    },
    "PROCEDURAL": {
      "description": "System policy/capability assertions",
      "creates_timeline_obligations": true,
      "requires_framing": false
    },
    "COUNTERFACTUAL": {
      "description": "Hypothetical reasoning (if X were true...)",
      "creates_timeline_obligations": false,
      "requires_framing": true
    },
    "SIMULATION": {
      "description": "Sandbox roleplay/fiction",
      "creates_timeline_obligations": false,
      "requires_framing": true,
      "can_become_factual": false
    },
    "QUOTED": {
      "description": "Attributed content from user/source",
      "creates_timeline_obligations": false,
      "requires_framing": true,
      "requires_attribution": true
    }
  },
  
  "input_risk_classes": {
    "NORMAL": {
      "description": "Standard input, proceed to semantic processing",
      "requires_quarantine": false
    },
    "STATE_MUTATION_ATTEMPT": {
      "description": "Attempt to modify system state",
      "requires_quarantine": true,
      "response": "SEEK_CLARIFICATION"
    },
    "PRIVILEGE_ESCALATION_ATTEMPT": {
      "description": "Attempt to modify identity or capabilities",
      "requires_quarantine": true,
      "response": "REFUSE"
    },
    "PROVENANCE_UPGRADE_ATTEMPT": {
      "description": "Claim about prior system statements",
      "requires_quarantine": true,
      "response": "SEEK_CLARIFICATION"
    }
  },
  
  "entry_types": {
    "commit": {
      "description": "Initial claim commitment",
      "required_fields": ["claim_id", "text", "source_ref", "confidence"],
      "optional_fields": ["heading", "constraints"]
    },
    "revision": {
      "description": "Claim content modification",
      "required_fields": ["claim_id", "old_text", "new_text", "reason"],
      "optional_fields": ["mutation_type", "severity"]
    },
    "ground": {
      "description": "Evidence attachment",
      "required_fields": ["claim_id", "evidence_ref", "evidence_type"],
      "optional_fields": ["confidence_delta"]
    },
    "retract": {
      "description": "Claim withdrawal",
      "required_fields": ["claim_id", "reason"],
      "optional_fields": ["cascade"]
    },
    "prop_bind": {
      "description": "First identity binding for a proposition hash",
      "required_fields": ["prop_id", "prop_hash", "entity_norm", "predicate_norm", "value_norm"],
      "optional_fields": ["value_features", "entity_raw", "value_raw"]
    },
    "prop_rebind": {
      "description": "Merge hash to existing identity (paraphrase)",
      "required_fields": ["prop_id", "new_prop_hash", "match_score", "match_reason"],
      "optional_fields": ["entity_norm", "value_features", "info_delta"]
    },
    "prop_split": {
      "description": "Detach hash from identity (correction)",
      "required_fields": ["prop_id", "prop_hash", "new_prop_id", "reason"],
      "optional_fields": []
    }
  },
  
  "invariants": {
    "INT-1": {
      "name": "boundary_gate_first",
      "severity": "critical",
      "enforced_by": ["boundary_gate"],
      "description": "All inputs pass through boundary classification BEFORE semantic parsing"
    },
    "INT-2": {
      "name": "mode_discipline",
      "severity": "critical",
      "enforced_by": ["extractor", "router"],
      "description": "Claims carry explicit mode; mode determines obligation types"
    },
    "INT-2A": {
      "name": "no_timeline_from_counterfactual",
      "severity": "critical",
      "enforced_by": ["router"],
      "description": "ORDERING/MUST_NOT_ASSERT only from FACTUAL/PROCEDURAL modes"
    },
    "INT-3": {
      "name": "quarantine_buffer",
      "severity": "high",
      "enforced_by": ["boundary_gate"],
      "description": "Quarantined inputs cannot reach semantic parsing or obligation derivation"
    },
    "INV-001": {
      "name": "router_proposes_ledger_commits",
      "severity": "critical",
      "enforced_by": ["router", "ledger"],
      "description": "Router suggestions are proposals; only ledger events make them real"
    },
    "INV-002": {
      "name": "identity_revocable",
      "severity": "critical",
      "enforced_by": ["router"],
      "description": "PROP_SPLIT can undo any binding"
    },
    "INV-003": {
      "name": "no_specificity_invention",
      "severity": "critical",
      "enforced_by": ["router", "diff"],
      "description": "Info gain (lessâ†’more specific) requires arbitration, never autobind"
    },
    "INV-004": {
      "name": "no_silent_merges",
      "severity": "critical",
      "enforced_by": ["router", "ledger"],
      "description": "All rebinding recorded as PROP_REBIND events"
    },
    "INV-005": {
      "name": "polarity_span_local",
      "severity": "high",
      "enforced_by": ["extractor"],
      "description": "Negation detection only within matched span, not full sentence"
    },
    "INV-006": {
      "name": "telemetry_derived_not_authoritative",
      "severity": "high",
      "enforced_by": ["telemetry"],
      "description": "Telemetry watches but never modifies state"
    },
    "INV-007": {
      "name": "split_preserves_hash_metadata",
      "severity": "high",
      "enforced_by": ["router"],
      "description": "Split uses detached hash's own triple, not parent record"
    },
    "INV-008": {
      "name": "year_mismatch_blocks_bind",
      "severity": "critical",
      "enforced_by": ["router"],
      "description": "Different years are different propositions, never merge"
    },
    "INV-009": {
      "name": "unit_mismatch_blocks_bind",
      "severity": "critical",
      "enforced_by": ["router"],
      "description": "Different units are different propositions, never merge"
    },
    "INV-010": {
      "name": "overbinding_penalized",
      "severity": "medium",
      "enforced_by": ["router"],
      "description": "Identities with too many distinct bindings get score penalty"
    }
  },
  
  "thresholds": {
    "router": {
      "bind_threshold": {
        "value": 0.92,
        "description": "Auto-rebind above this score"
      },
      "maybe_threshold": {
        "value": 0.80,
        "description": "Gray zone requiring arbitration"
      },
      "info_gain_score": {
        "value": 0.55,
        "description": "Score assigned when info gain detected (forces arbitration)"
      },
      "info_loss_score": {
        "value": 0.88,
        "description": "Score assigned when info loss detected (allows rebind)"
      },
      "overbind_hash_limit": {
        "value": 10,
        "description": "Hash count triggering overbind check"
      },
      "overbind_signature_limit": {
        "value": 3,
        "description": "Unique value signature count triggering overbind penalty"
      },
      "overbind_penalty": {
        "value": 0.12,
        "description": "Score penalty for overbinding"
      }
    },
    "diff": {
      "polarity_flip_severity": {
        "value": 1.0,
        "description": "Mutation severity for polarity inversion"
      },
      "tense_shift_severity": {
        "value": 0.8,
        "description": "Mutation severity for tense change"
      },
      "modality_strengthen_severity": {
        "value": 0.6,
        "description": "Mutation severity for certainty inflation"
      },
      "quantifier_strengthen_severity": {
        "value": 0.5,
        "description": "Mutation severity for scope inflation"
      },
      "value_drift_severity": {
        "value": 0.4,
        "description": "Mutation severity for value changes"
      }
    },
    "extractor": {
      "source_confidence_threshold": {
        "value": 0.70,
        "description": "Minimum confidence for SOURCE mode extraction"
      },
      "output_confidence_threshold": {
        "value": 0.55,
        "description": "Minimum confidence for OUTPUT mode extraction"
      }
    },
    "escalation": {
      "disengage_severity": {
        "value": 1.0,
        "description": "Mutation severity triggering DISENGAGE"
      },
      "arbitrate_on_any_violation": {
        "value": true,
        "description": "Any violation triggers ARBITRATE"
      }
    }
  },
  
  "scoring_weights": {
    "router": {
      "entity": 0.4,
      "predicate": 0.3,
      "value": 0.3
    }
  },
  
  "heading_rules": {
    "SUMMARIZE": {
      "allows_novel": false,
      "allows_drop": true,
      "allows_mutation": false,
      "description": "Preserve meaning, allow omission"
    },
    "TRANSLATE": {
      "allows_novel": false,
      "allows_drop": false,
      "allows_mutation": false,
      "description": "Exact semantic transfer"
    },
    "REWRITE": {
      "allows_novel": false,
      "allows_drop": false,
      "allows_mutation": false,
      "description": "Style change only"
    },
    "ELABORATE": {
      "allows_novel": true,
      "allows_drop": false,
      "allows_mutation": false,
      "novel_budget": 5,
      "description": "Add detail with budget"
    },
    "ANSWER_FROM_SOURCES": {
      "allows_novel": true,
      "allows_drop": true,
      "allows_mutation": false,
      "requires_evidence": true,
      "description": "Synthesis with citations"
    }
  },
  
  "golden_case_version": "1.0.0",
  "conformance_test_ids": [
    "router_paraphrase_rebind",
    "router_info_gain_arbitrate",
    "router_different_year_new",
    "router_split_preserves_metadata",
    "polarity_not_outside_span",
    "diff_quantifier_strengthen_violation",
    "diff_value_drift_detected"
  ]
}
